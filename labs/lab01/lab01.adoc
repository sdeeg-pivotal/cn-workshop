= Building a Spring Boot Application

== Create a Spring Boot Project

. If you haven't already, download this git repo and unpack it someplace convenient.

+
Lab01 is located here:
+
[source, bash]
---------------------------------------------------------------------
cn-workshop:
├── labs
│   ├── lab01
│   │   ├── hello-spring-boot
---------------------------------------------------------------------

. Import the project’s pom.xml into your editor/IDE of choice.
+
*_STS/Eclipse Import Help:_*
+
Select File > Import… Then select Maven > Existing Maven Projects. On the Import Maven Projects page, browse to the /hello-spring-boot directory (e.g. cn-workshop/labs/lab01/hello-spring-boot)

== Add an Endpoint

. Add an @RestController annotation to the class _io.pivotal.HelloSpringBootApplication_ (/hello-spring-boot/src/main/java/io/pivotal/HelloSpringBootApplication.java).
+
[source, java, numbered]
---------------------------------------------------------------------
package io.pivotal;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.RestController;

@SpringBootApplication
@RestController
public class HelloSpringBootApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloSpringBootApplication.class, args);
    }
}
---------------------------------------------------------------------

. Add the following request handler to the class _io.pivotal.HelloSpringBootApplication_ (/hello-spring-boot/src/main/java/io/pivotal/HelloSpringBootApplication.java).
+
[source,java]
---------------------------------------------------------------------
@RequestMapping("/")
public String hello() {
    return "Hello World!";
}
---------------------------------------------------------------------
+
Completed:
+
[source,java]
---------------------------------------------------------------------
package io.pivotal;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@SpringBootApplication
@RestController
public class HelloSpringBootApplication {

    public static void main(String[] args) {
        SpringApplication.run(HelloSpringBootApplication.class, args);
    }

    @RequestMapping("/")
    public String hello() {
        return "Hello World!";
    }
}
---------------------------------------------------------------------

== Run the _hello-spring-boot_ Application

. In a terminal, change working directory to *cn-workshop/labs/lab01/hello-spring-boot*
+
$ cd /cn-workshop/labs/lab01/hello-spring-boot

. Run the application
+
[source,bash]
---------------------------------------------------------------------
$ mvn clean package
$ java -jar target/hello-spring-boot-0.0.1-SNAPSHOT.jar

or

$ mvn clean spring-boot:run
---------------------------------------------------------------------

. You should see the application start up an embedded Apache Tomcat server on port 8080 (review terminal output):
+
[source,bash]
---------------------------------------------------------------------
2015-10-02 13:26:59.264  INFO 44749 --- [lication.main()] s.b.c.e.t.TomcatEmbeddedServletContainer: Tomcat started on port(s): 8080 (http)
2015-10-02 13:26:59.267  INFO 44749 --- [lication.main()] io.pivotal.hello.HelloSpringBootApplication: Started HelloSpringBootApplication in 2.541 seconds (JVM running for 9.141)
---------------------------------------------------------------------

. Browse to http://localhost:8080

. Stop the _hello-spring-boot_ application. In the terminal window: *Ctrl + C*

== Deploy _hello-spring-boot_ to Pivotal Cloud Foundry

. Create an application manifest in the root folder /hello-spring-boot
+
$ touch manifest.yml

. Add application metadata.  Change the name to something unique, like adding your initials.
+
[source, yaml]
---------------------------------------------------------------------
---
applications:
- name: hello-spring-boot-YOUR-INITIALS
  memory: 512M
  instances: 1
  path: ./target/hello-spring-boot-0.0.1-SNAPSHOT.jar
  buildpack: java_buildpack_offline
---------------------------------------------------------------------

. Push application into Cloud Foundry
+
$ cf push -f manifest.yml

. Find the URL created for your app in the health status report. Browse to your app.

*Congratulations!* You’ve just completed your first Spring Boot application.

